services:
  simkes:
    container_name: simkes
    image: mfathoor/simkes-api:alpine
    ports:
      - 13379:8080
    networks:
      ikti:
    volumes:
      - ./assets:/cmd/assets
      - ./.env:/cmd/.env
    restart: always
    healthcheck:
      test: ["CMD", "wget", "--spider", "127.0.0.1:8080/healthz", "||", "exit", "1"]
      interval: 45s
      timeout: 10s
      retries: 3

networks:
  ikti:
    external: true
